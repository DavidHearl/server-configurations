{% extends 'base.html' %}
{% block content %}
<h2>Add New Entries</h2>
<div style="display: flex; flex-wrap: wrap; gap: 2em;">
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>CPU</h4>
        {{ cpu_form.as_p }}
        <button type="submit" name="cpu-submit">Add CPU</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>RAM</h4>
        {{ ram_form.as_p }}
        <button type="submit" name="ram-submit">Add RAM</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>Motherboard</h4>
        {{ motherboard_form.as_p }}
        <button type="submit" name="mb-submit">Add Motherboard</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>NIC</h4>
        {{ nic_form.as_p }}
        <button type="submit" name="nic-submit">Add NIC</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>PSU</h4>
        {{ psu_form.as_p }}
        <button type="submit" name="psu-submit">Add PSU</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>Case</h4>
        {{ case_form.as_p }}
        <button type="submit" name="case-submit">Add Case</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>Rack</h4>
        {{ rack_form.as_p }}
        <button type="submit" name="rack-submit">Add Rack</button>
    </form>
    <form method="post" style="flex:1; min-width:300px;">{% csrf_token %}
        <h4>System</h4>
        {{ system_form.as_p }}
        <button type="submit" name="system-submit">Add System</button>
    </form>
</div>

<hr>
<h2>All Systems</h2>
<table border="1" cellpadding="6" cellspacing="0" style="border-collapse:collapse; width:100%; background:#fff;">
    <thead>
        <tr>
            <th>Name</th>
            <th>Rack</th>
            <th>Role</th>
            <th>CPU</th>
            <th>RAM</th>
            <th>Motherboard</th>
            <th>NIC</th>
            <th>PSU</th>
            <th>Case</th>
            <th>OS Use Case</th>
            <th>Notes</th>
            <th>Edit</th>
        </tr>
    </thead>
    <tbody>
        {% for system in systems %}
        <tr>
            <td>{{ system.name }}</td>
            <td>{{ system.location }}</td>
            <td>{{ system.role }}</td>
            <td>{{ system.cpu }}</td>
            <td>
                {% for ram in system.ram.all %}
                    {{ ram }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>{{ system.motherboard }}</td>
            <td>
                {% for nic in system.nic.all %}
                    {{ nic }}{% if not forloop.last %}, {% endif %}
                {% endfor %}
            </td>
            <td>{{ system.psu }}</td>
            <td>{{ system.case }}</td>
            <td>{{ system.os_use_case }}</td>
            <td>{{ system.notes }}</td>
            <td><a href="{% url 'edit_system' system.pk %}">Edit</a></td>
        </tr>
        {% empty %}
        <tr><td colspan="12">No systems defined.</td></tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}